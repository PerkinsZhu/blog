- 自从遇到了zx git@github.com:google/zx.git,很快我就丢掉了 shell脚本

- 使用zx编写脚本，可以随心所欲的使用nodejs模块类库,我的demo使用mysql类库去将日志写入到mysql数据库， 当然你可以调用fs-extra，写入到本地文件当中，选择性很多了

- 使用mjs模块，可以像使用前端js代码一样轻松使用 import和 export

- 引用zx中的$符号，可以随意使用shell脚本中的所有命令

- 同时使用typescript来写zx的脚本，很是不错哟，不过在import时需要写成 ’./xxx.mjs‘,其实调用的就是mts

- 可以在代码中随意调用 npm、 yarn、 pnpm等，以及git pull 、git push 等等。

- 可以在代码中更好的编写脚本的逻辑控制，虽然在shell脚本中页可以实现，但对于前端工程师来说，用js这简直就是so easy的事情。

- 完美的使用await async来控制 同步和异步代码的执行顺序


# 我通过zx做了什么
    | 先说一下背景：
        PC：主应用 + 八个子应用（全部是vue3）
        APP: 主应用（vue2） + 两个子应用（vue3）
        Other: P、Q、W 其他三个都是一个应用就完事的
        算一下，9+3+3=15个应用
    | 我这脚本就是为了方便打包这15个应用

# 怎么做的呢
    | 十五个应用每次都到对应的目录去yarn build，或者pnpm build，会相当麻烦，而且会有遗漏的可能。
    
    | 项目在我本地都是可以运行的，所以这里我省去了， npm install 或者 yarn 或者pnpm i 。

    | 通过我的小demo，便可以通过一个命令 pnpm build:all，将上面说的15个应用全部打包完毕，放到指定服务器上。

    | 然后可以查看log日志，确认报错信息，或者直接线上测试查看发布情况。如果有个别的子应用出现问题，可以单独去打包子应用即可。
    
    | 对每个子应用的打包目录，做了调整，共同打包到一个release目录，将这个目录作为一个代码仓库，方便回退和记录的。

    | 过程：
        - 1、到指定的git仓库目录，拉取代码 cd path、git pull 
        - 2、安装依赖 （此步骤省略） pnpm i 
        - 3、代码仓库只有一个应用的直接编译应用 pnpm build 
        - 4、代码仓库包含多个应用的 需要先到指定的子应用目录 cd path, 再进行pnpm build
        - 5、编译结束，根据版本号version 给代码仓库打上tag标签  git tag  git push
        - 6、将编译后的文件拷贝到服务器指定的目录  scp -r
        - 7、所有的代码仓库都编译上传完毕以后，要将release代码仓库进行  git add . git commit git push,然后再打上对应的tag标签，推送到服务器
# 实际操作

- 1、
# 参考
    - https://juejin.cn/post/7062245685650784264
    - https://juejin.cn/post/7002536429314277384
    

- 1、安装脚本库
    ```javascript
        npm i -g zx
    ```

